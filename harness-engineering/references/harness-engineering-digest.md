# Harnesses are underrated 文章蒸馏

## 文章信息

- 标题: Harnesses are underrated
- 来源: OpenAI
- 发布时间: 2025-07-31
- 作者: Boris Power、Brendan Dolan-Gavitt、Calvin French-Owen、Charles Lamanna、Katie Gamanji、Oliver Greenwood、Romain Huet
- 链接: https://openai.com/index/harness-engineering/

## 全文核心观点

这篇文章的主张是：模型能力决定理论上限，但工程系统（harness）决定实际交付效果。  
“好 harness”不是单一技巧，而是把代理放到真实工作回路里，让它能访问文档、代码、测试、CI 和故障反馈，并在明确的边界内迭代。

## 关键内容蒸馏

### 1. 先解决执行环境，再谈提示词细节

- 让代理直接使用真实工具：代码库、测试命令、日志、PR、CI。
- 如果代理无法运行或验证改动，即使模型很强也难以稳定产出。
- 实践里，基础 harness 的改进经常比微调提示词更有效。

### 2. 给代理“可控自主权”

- 不要把代理变成每一步都等待人工确认的脚本。
- 在可控预算内允许代理先自行尝试并迭代。
- 自主执行必须伴随可观测性：每次尝试有明确输入、输出和失败信号。

### 3. 用分层权限降低风险

- 从低权限开始（读代码、查文档），按证据逐级放开（跑测试、改代码、执行受限操作）。
- 权限升级应有触发条件；失败应能回滚到安全级别。
- 这样既提高成功率，也减少误操作风险。

### 4. 明确定义“何时请求人工”

- 不是遇到问题就立刻抛给人，也不是无限重试。
- 需要在系统层面定义求助阈值，例如：
  - 同类失败重复出现；
  - 关键信息缺失；
  - 需要越权或高风险动作；
  - 多方案权衡需要业务取舍。
- 求助请求应包含证据和候选方案，便于人快速决策。

### 5. 把 agent 纳入 CI 回路

- 让代理并行尝试修复，CI 作为客观判定器。
- 失败时把上下文移交人工，而不是隐藏失败。
- 这种人机接力可以缩短故障恢复时间。

### 6. 关注真实指标，而非演示效果

- 衡量指标应围绕真实交付：任务闭环率、修复成功率、回归通过率、人工介入频次、平均修复时间。
- 文章案例强调：当 harness 做对后，任务完成率会明显提升。

## 文中提到的案例信号

- 在 HumanEval 场景，完善 agent-only harness 后，完成率可从接近 0 提升到约 50% 量级。
- 在 SWE-bench Verified 场景，先达到约 65%，继续优化 harness 后可到约 75%。
- 文中还给出团队实践信号：通过强化 harness，任务解决率可从约 28% 提升到约 65%。

## 与“人机协作/主动请求”直接相关的落地规则

1. 先让代理独立跑到“可证明卡住”为止，再请求人工。  
2. 请求人工时只问一个关键决策，并给出 A/B/C 选项。  
3. 每个选项明确成本、风险、收益与时间。  
4. 人工确认后，代理继续执行并返回证据，而不是重复讨论。  
5. 将协作过程写入任务日志，保持可追溯。

## 可直接复用的求助阈值

- 连续 2-3 次同类失败，且错误模式一致。
- 缺失关键上下文，无法再通过本地推断补足。
- 需要生产级权限、外网访问、密钥或不可逆操作。
- 变更范围超出既定边界，可能影响无关模块。

## 可直接复用的求助结构

1. 当前阻塞（一句话）。  
2. 已尝试动作与证据（命令、日志、结果）。  
3. 根因假设（含置信度）。  
4. 备选方案 A/B/C（成本、风险、预计耗时）。  
5. 需要人工确认的唯一问题。  

## 与 skill 的关系

本目录下的 `SKILL.md` 把这些原则转成可执行流程，重点覆盖：
- harness 先行；
- 自主执行预算；
- 主动求助阈值；
- 选项型协作提问；
- 可追溯交付收束。
